{% include 'partials/head.html' %}

<body class="bg-gray-50 flex flex-col min-h-screen">
  <!-- Navigation (NO DROPDOWN) -->
  {% include 'partials/navbar.html' %}

  <!-- Main Content -->
  <main class="flex-grow container mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold mb-8 text-center">Latest Announcements</h2>

    <!-- Filter Buttons (with ACTIVE COLOR logic) -->
    <div class="flex flex-wrap gap-2 mb-6 justify-center">
      <a href="{% url 'announcements:index' %}" class="px-4 py-2 rounded {% if not filter %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        All Announcements
      </a>
      <a href="{% url 'announcements:index' %}?filter=general" class="px-4 py-2 rounded {% if filter == 'general' %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        General
      </a>
      <a href="{% url 'announcements:index' %}?filter=computer_science" class="px-4 py-2 rounded {% if filter == 'computer_science' %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        Computer Science
      </a>
      <a href="{% url 'announcements:index' %}?filter=math" class="px-4 py-2 rounded {% if filter == 'math' %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        Mathematics
      </a>
      <a href="{% url 'announcements:index' %}?filter=physics" class="px-4 py-2 rounded {% if filter == 'physics' %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        Physics
      </a>
      <a href="{% url 'announcements:index' %}?filter=chemistry" class="px-4 py-2 rounded {% if filter == 'chemistry' %}bg-blue-800 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
        Chemistry
      </a>
    </div>

    {% if announcements %}
    <div class="grid md:grid-cols-2 gap-6">
      {% for announcement in announcements %}
      <div class="bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow">
        <div class="flex justify-between items-start mb-2">
          <h3 class="text-xl font-bold">{{ announcement.title }}</h3>
          <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
            {{ announcement.get_display_display }}
          </span>
        </div>
        <p class="text-gray-600 mb-4">{{ announcement.content }}</p>
        <div class="text-sm text-gray-500">
          <i class="far fa-calendar-alt mr-2"></i>
          {{ announcement.datetime|date:"M d, Y H:i" }}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-8">
      <i class="fas fa-bell-slash text-2xl text-gray-400"></i>
      <p class="mt-2 text-gray-600">No announcements found</p>
    </div>
    {% endif %}
    
    <!-- Admin Actions -->
    {% if user.is_authenticated and user.role == 'admin' %}
    <div class="mt-8 text-center">
      <a href="{% url 'announcements:new' %}" class="bg-blue-800 text-white px-4 py-2 rounded hover:bg-blue-700 inline-block">
        <i class="fas fa-plus mr-2"></i>Create New Announcement
      </a>
    </div>
    {% endif %}
  </main>

  <!-- Footer -->
  {% include 'partials/footer.html' %}
</body>
</html>